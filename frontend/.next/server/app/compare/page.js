(()=>{var e={};e.id=266,e.ids=[266],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8910:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d}),t(1835),t(9351),t(5866);var n=t(3191),s=t(8716),a=t(7922),o=t.n(a),l=t(5231),i={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);t.d(r,i);let d=["",{children:["compare",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,1835)),"/app/frontend/app/compare/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,9351)),"/app/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/app/frontend/app/compare/page.tsx"],u="/compare/page",x={require:t,loadChunk:()=>Promise.resolve()},m=new n.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/compare/page",pathname:"/compare",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8229:(e,r,t)=>{Promise.resolve().then(t.bind(t,6312))},6312:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>x});var n=t(326),s=t(7577),a=t(108),o=t(119),l=t(3951),i=t(7786),d=t(8825),c=t(6824),u=t(9395);function x(){let{token:e}=(0,u.a)(),[r,t]=s.useState(""),[x,p]=s.useState(""),b=(0,a.a)({queryKey:["job-runs",e],enabled:!!e,queryFn:async()=>(0,c.SC)("/job-runs",{},{token:e||void 0})}),h=(0,o.D)({mutationFn:async({runA:r,runB:t})=>(0,c.SC)(`/job-runs/compare?run_a=${encodeURIComponent(r)}&run_b=${encodeURIComponent(t)}`,{},{token:e||void 0})}),g=b.data??[],f=!!(r&&x&&r!==x);return e?(0,n.jsxs)("div",{className:"space-y-6",children:[n.jsx(l.Z,{title:"Compare Job Runs",subtitle:"Select two completed runs to compare their carbon footprint and performance.",actions:n.jsx("button",{type:"button",onClick:()=>{f&&h.mutate({runA:r,runB:x})},disabled:!f||h.isPending,className:"h-10 rounded-xl bg-emerald-600 px-4 text-sm font-semibold text-white transition hover:bg-emerald-500 disabled:opacity-50",children:h.isPending?"Comparing...":"Compare"})}),b.isLoading?n.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 text-sm text-slate-600",children:"Loading runs..."}):0===g.length?n.jsx(d.Z,{title:"No runs available",description:"Ingest at least two runs to compare."}):(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-2",children:[n.jsx(m,{label:"Baseline Run",helper:"Pick the before run",value:r,onChange:t,runs:g}),n.jsx(m,{label:"Candidate Run",helper:"Pick the after run",value:x,onChange:p,runs:g})]}),h.data?(0,n.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-5",children:[(0,n.jsxs)("div",{className:"mb-4",children:[n.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Result"}),n.jsx("div",{className:"text-xs text-slate-500",children:"Baseline vs Candidate deltas"})]}),n.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:Object.entries(h.data.deltas).map(([e,r])=>n.jsx(i.Z,{label:e,value:null==r?"-":r.toFixed(3)},e))}),h.data.explanation?n.jsx("div",{className:"mt-4 rounded-xl border border-slate-200 bg-slate-50 p-4 text-sm text-slate-700",children:h.data.explanation}):null]}):h.isError?n.jsx("div",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:String(h.error?.message||"Compare failed")}):null]}):n.jsx(d.Z,{title:"You're not signed in",description:"Sign in to compare runs.",actions:[{label:"Go to login",href:"/login"}]})}function m({label:e,helper:r,value:t,onChange:s,runs:a}){return(0,n.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[(0,n.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[n.jsx("div",{className:"text-sm font-semibold text-slate-900",children:e}),n.jsx("div",{className:"text-xs text-slate-500",children:r})]}),(0,n.jsxs)("select",{value:t,onChange:e=>s(e.target.value),className:"h-9 rounded-xl border border-slate-200 bg-white px-3 text-sm text-slate-700 outline-none focus:ring-2 focus:ring-slate-200",children:[n.jsx("option",{value:"",children:"Select run"}),a.map(e=>(0,n.jsxs)("option",{value:e.id,children:[e.run_name," \xb7 ",e.region," \xb7 ",e.job_type]},e.id))]})]}),t?(0,n.jsxs)("div",{className:"rounded-xl border border-dashed border-slate-200 p-3 text-sm text-slate-700",children:["Selected: ",a.find(e=>e.id===t)?.run_name||t]}):n.jsx("div",{className:"rounded-xl border border-dashed border-slate-200 p-3 text-sm text-slate-600",children:"Choose a run to see metrics."})]})}},8825:(e,r,t)=>{"use strict";t.d(r,{Z:()=>l});var n=t(326);t(7577);var s=t(434);function a(...e){return e.filter(Boolean).join(" ")}function o({a:e}){let r=a("inline-flex items-center justify-center gap-2 rounded-xl px-4 py-2 text-sm font-medium transition focus:outline-none focus:ring-2 focus:ring-ring/40 disabled:pointer-events-none disabled:opacity-50",{primary:"bg-primary text-primary-foreground hover:opacity-90 shadow-sm border border-primary/20",secondary:"bg-muted/60 text-foreground hover:bg-muted border border-border/60",ghost:"bg-transparent text-foreground hover:bg-muted/60 border border-transparent"}[e.variant??"primary"]);return e.href?e.external?(0,n.jsxs)("a",{href:e.href,target:"_blank",rel:"noreferrer",className:r,children:[e.icon,e.label]}):(0,n.jsxs)(s.default,{href:e.href,className:r,children:[e.icon,e.label]}):(0,n.jsxs)("button",{type:"button",className:r,onClick:e.onClick,children:[e.icon,e.label]})}let l=function({title:e,description:r,icon:t,actions:s,compact:l,className:i}){return(0,n.jsxs)("div",{className:a("relative overflow-hidden rounded-2xl border border-border/60 bg-background","shadow-sm",l?"p-5":"p-8",i),children:[n.jsx("div",{className:a("pointer-events-none absolute inset-0 opacity-70","bg-[radial-gradient(900px_circle_at_25%_0%,rgba(99,102,241,0.07),transparent_45%),radial-gradient(700px_circle_at_85%_20%,rgba(16,185,129,0.07),transparent_40%)]")}),(0,n.jsxs)("div",{className:"relative flex flex-col items-center text-center",children:[t?n.jsx("div",{className:"mb-4 grid h-14 w-14 place-items-center rounded-2xl border border-border/60 bg-background/70 text-muted-foreground",children:t}):n.jsx("div",{className:"mb-4 grid h-14 w-14 place-items-center rounded-2xl border border-border/60 bg-background/70 text-muted-foreground",children:(0,n.jsxs)("svg",{viewBox:"0 0 24 24",className:"h-6 w-6",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[n.jsx("path",{d:"M12 3v18"}),n.jsx("path",{d:"M3 12h18"})]})}),n.jsx("h3",{className:"text-base font-semibold text-foreground",children:e}),r?n.jsx("div",{className:"mt-2 max-w-xl text-sm text-muted-foreground",children:r}):null,s?.length?n.jsx("div",{className:a("mt-5 flex flex-wrap items-center justify-center gap-2"),children:s.map((e,r)=>n.jsx(o,{a:e},`${e.label}-${r}`))}):null]})]})}},3951:(e,r,t)=>{"use strict";t.d(r,{Z:()=>l});var n=t(326),s=t(7577);function a(...e){return e.filter(Boolean).join(" ")}function o({crumbs:e}){return n.jsx("div",{className:"flex flex-wrap items-center gap-2 text-xs text-muted-foreground",children:e.map((r,t)=>{let o=r.href?"a":"button",l=r.href?{href:r.href}:{type:"button",onClick:r.onClick};return(0,n.jsxs)(s.Fragment,{children:[n.jsx(o,{...l,className:a("transition hover:text-foreground",r.href?"underline-offset-4 hover:underline":""),children:r.label}),t<e.length-1?n.jsx("span",{className:"opacity-60",children:"/"}):null]},`${r.label}-${t}`)})})}let l=function({title:e,subtitle:r,icon:t,actions:s,crumbs:l,badge:i,className:d}){return(0,n.jsxs)("div",{className:a("relative overflow-hidden rounded-2xl border border-border/60 bg-background shadow-sm","px-5 py-4 md:px-6 md:py-5",d),children:[n.jsx("div",{className:a("pointer-events-none absolute inset-0 opacity-70","bg-[radial-gradient(900px_circle_at_25%_0%,rgba(99,102,241,0.07),transparent_45%),radial-gradient(700px_circle_at_85%_20%,rgba(16,185,129,0.07),transparent_40%)]")}),(0,n.jsxs)("div",{className:"relative flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[(0,n.jsxs)("div",{className:"min-w-0",children:[l?.length?n.jsx(o,{crumbs:l}):null,(0,n.jsxs)("div",{className:"mt-1 flex items-start gap-3",children:[t?n.jsx("div",{className:"mt-0.5 grid h-10 w-10 shrink-0 place-items-center rounded-2xl border border-border/60 bg-background/70 text-muted-foreground",children:t}):null,(0,n.jsxs)("div",{className:"min-w-0",children:[(0,n.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx("h1",{className:"truncate text-lg font-semibold text-foreground md:text-xl",children:e}),i?n.jsx("div",{className:"inline-flex items-center rounded-full border border-border/60 bg-muted/40 px-2.5 py-1 text-xs text-muted-foreground",children:i}):null]}),r?n.jsx("div",{className:"mt-1 text-sm text-muted-foreground",children:r}):null]})]})]}),s?n.jsx("div",{className:"flex shrink-0 flex-wrap items-center gap-2 md:justify-end",children:s}):null]})]})}},7786:(e,r,t)=>{"use strict";t.d(r,{Z:()=>l});var n=t(326);function s(...e){return e.filter(Boolean).join(" ")}function a({data:e}){if(!e?.length)return null;let r=Math.min(...e),t=Math.max(...e)-r||1,s=e.map((n,s)=>{let a=s/Math.max(1,e.length-1)*120;return`${a.toFixed(2)},${(32-(n-r)/t*32).toFixed(2)}`}).join(" ");return n.jsx("svg",{width:120,height:32,viewBox:"0 0 120 32",className:"mt-2 overflow-visible","aria-hidden":"true",children:n.jsx("polyline",{points:s,fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-muted-foreground/70",strokeLinejoin:"round",strokeLinecap:"round"})})}function o({trend:e}){let r=e.value>=0,t=`${r?"+":""}${e.value.toFixed(10>Math.abs(e.value)?1:0)}%`;return(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)("span",{className:s("inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-xs",r?"border-emerald-500/30 bg-emerald-500/10 text-emerald-600 dark:text-emerald-400":"border-rose-500/30 bg-rose-500/10 text-rose-600 dark:text-rose-400"),children:[n.jsx("svg",{viewBox:"0 0 24 24",className:"h-3 w-3",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:r?n.jsx("path",{d:"M7 14l5-5 5 5"}):n.jsx("path",{d:"M7 10l5 5 5-5"})}),t]}),e.label?n.jsx("span",{className:"text-xs text-muted-foreground",children:e.label}):null]})}t(7577);let l=function({title:e,label:r,value:t,subtitle:l,icon:i,trend:d,sparkline:c,footer:u,loading:x,onClick:m,className:p}){let b="function"==typeof m,h=e||r||"";return(0,n.jsxs)("section",{role:b?"button":"region",tabIndex:b?0:-1,onClick:m,onKeyDown:e=>{b&&("Enter"===e.key||" "===e.key)&&(e.preventDefault(),m?.())},className:s("group relative overflow-hidden rounded-2xl border border-border/60 bg-background","shadow-sm transition",b&&"cursor-pointer hover:border-border hover:shadow-md focus:outline-none focus:ring-2 focus:ring-ring/40",p),"aria-label":h,children:[n.jsx("div",{className:s("pointer-events-none absolute inset-0 opacity-0 transition-opacity duration-300","bg-[radial-gradient(900px_circle_at_20%_0%,rgba(99,102,241,0.08),transparent_45%),radial-gradient(700px_circle_at_90%_20%,rgba(16,185,129,0.08),transparent_40%)]","group-hover:opacity-100")}),(0,n.jsxs)("div",{className:"relative p-5",children:[(0,n.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,n.jsxs)("div",{className:"min-w-0",children:[n.jsx("div",{className:"text-xs font-medium tracking-wide text-muted-foreground",children:h}),(0,n.jsxs)("div",{className:"mt-2",children:[x?n.jsx("div",{className:"h-8 w-44 animate-pulse rounded-md bg-muted/60"}):n.jsx("div",{className:"truncate text-2xl font-semibold leading-8 text-foreground",children:t}),l?n.jsx("div",{className:"mt-1 text-sm text-muted-foreground",children:l}):null]})]}),i?n.jsx("div",{className:s("grid h-11 w-11 place-items-center rounded-2xl border border-border/60","bg-background/60 text-muted-foreground"),"aria-hidden":"true",children:i}):null]}),(0,n.jsxs)("div",{className:"mt-4 flex items-end justify-between gap-3",children:[(0,n.jsxs)("div",{className:"min-w-0",children:[d?n.jsx(o,{trend:d}):null,u?n.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:u}):null]}),c?.length?n.jsx("div",{className:"text-muted-foreground/70",children:n.jsx(a,{data:c})}):null]})]})]})}},1835:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>o,__esModule:()=>a,default:()=>l});var n=t(8570);let s=(0,n.createProxy)(String.raw`/app/frontend/app/compare/page.tsx`),{__esModule:a,$$typeof:o}=s;s.default;let l=(0,n.createProxy)(String.raw`/app/frontend/app/compare/page.tsx#default`)}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[55,463,302],()=>t(8910));module.exports=n})();